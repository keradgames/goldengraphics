var PIXI=PIXI||{};PIXI.EventTarget=function(){var a={};this.addEventListener=this.on=function(b,c){void 0===a[b]&&(a[b]=[]),-1===a[b].indexOf(c)&&a[b].push(c)},this.dispatchEvent=this.emit=function(b){for(var c in a[b.type])a[b.type].hasOwnProperty(c)&&a[b.type][c](b)},this.removeEventListener=this.off=function(b,c){var d=a[b].indexOf(c);-1!==d&&a[b].splice(d,1)}},function(a){var b={};b.filters={},function(){var a=!1,c=/xyz/.test(function(){})?/\b_super\b/:/.*/;b.Class=function(){},b.Class.prototype={},b.Class.extend=function(b){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in b)f[g]="function"==typeof b[g]&&"function"==typeof e[g]&&c.test(b[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,b[g]):b[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}(),b.Base=b.Class.extend({init:function(){}}),b.Color=b.Base.extend({init:function(a,b,c,d){this._super(),this.r=a||0,this.g=b||0,this.b=c||0,this.a=void 0!=d?d:1},clone:function(){return new b.Color(this.r,this.g,this.b,this.a)},multiply:function(a){return a},toHex:function(){return b.Color.toHex(this)}}),b.Color.fromHex=function(a){var c=null,d=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(d,function(a,b,c,d){return b+b+c+c+d+d});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return e&&(c=new b.Color(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16))),c},b.Color.toHex=function(a){var b=16,c=a.r.toString(b),d=a.g.toString(b),e=a.b.toString(b);return c=1===c.length?"0"+c:c,d=1===d.length?"0"+d:d,e=1===e.length?"0"+e:e,"#"+c+d+e},b.Color.gradientPoint=function(a,c,d,e){var f=new b.Color;if(0===d)return a.clone();if(1===d)return c.clone();var g=[a],h=0,i=0;return e?(g=g.concat(e),g.push(c),i=d*(g.length-1),h=Math.floor(i),b.Color.gradientPoint(g[h],g[h+1],i%1)):(f.r=a.r+Math.floor((c.r-a.r)*d),f.g=a.g+Math.floor((c.g-a.g)*d),f.b=a.b+Math.floor((c.b-a.b)*d),f)},b.Point2D=b.Base.extend({init:function(a,b){this._super(),this.x=a||0,this.y=b||0}}),b.ImageLoader=b.Base.extend({init:function(a){PIXI.EventTarget.call(this),this.url=a},load:function(){var a=this;if(b.BaseTexture.cache[this.url])this.img=b.BaseTexture.cache[this.url],this.onLoaded();else{var c=new XMLHttpRequest;this.img=new Image,this.img.addEventListener("load",function(){b.BaseTexture.cache[a.url]=a.img,a.onLoaded()}),this.img.addEventListener("error",function(){a.onError()}),c.onload=function(){var b=window.URL||window.webkitURL;a.img.src=b.createObjectURL(this.response)},c.open("GET",this.url,!0),c.responseType="blob",c.onerror=function(){a.onError()},c.send()}},onLoaded:function(){this.dispatchEvent({type:"loaded",content:this})},onError:function(){this.dispatchEvent({type:"error",content:this})}}),b.AssetLoader=b.Base.extend({init:function(a,c){PIXI.EventTarget.call(this),this.assetURLs=a,this.crossorigin=c,this.loadersByType={jpg:b.ImageLoader,jpeg:b.ImageLoader,png:b.ImageLoader,gif:b.ImageLoader}},load:function(){var a=this;this.loadCount=this.assetURLs.length;for(var b=0;b<this.assetURLs.length;b++){var c=this.assetURLs[b],d=c.split(".").pop().toLowerCase(),e=this.loadersByType[d];if(!e)throw new Error(d+" is an unsupported file type");var f=new e(c,this.crossorigin);f.addEventListener("loaded",function(){a.onAssetLoaded()}),f.addEventListener("error",function(){a.onError()}),f.load()}},onAssetLoaded:function(){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this}),this.onProgress&&this.onProgress(),0==this.loadCount&&(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},onError:function(){this.dispatchEvent({type:"onError",content:this})}}),b.CanvasRenderer=b.Base.extend({init:function(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="destination-over",this.imageData=this.context.createImageData(this.canvas.width,this.canvas.height)},render:function(a){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);(new Date).getTime();a?(this._updateImageData(a),a._render&&a._render._imageToRender&&this.context.drawImage(a._render._imageToRender,0,0,a._render._imageToRender.width,a._render._imageToRender.height)):console.log("Stage is not defined");(new Date).getTime()},resize:function(a,b){this.canvas.width=a,this.canvas.height=b},_updateImageData:function(a){var b,c,d=null;if(a&&a.stage){a._render=a._render||{},a._render._canvas?a._render._context.clearRect(-a._render._canvas.width,-a._render._canvas.height,2*a._render._canvas.width,2*a._render._canvas.height):this._createTextureCanvas(a),a.texture?a._render._context.drawImage(a.texture,0,0,a.texture.width,a.texture.height):(b=a.width||this.canvas.width/a.scale.x,c=a.height||this.canvas.height/a.scale.y,b=a._render._canvas.width,c=a._render._canvas.height);for(var e in a.children)a.children.hasOwnProperty(e)&&(d=a.children[e],d.opacity>0&&(this._updateImageData(d),d._render._imageToRender&&(a._render._context.setTransform(d.scale.x,0,0,d.scale.y,d.position.x,d.position.y),a._render._context.globalAlpha=d.opacity,a._render._context.drawImage(d._render._imageToRender,d.anchor.x*-a.width,d.anchor.y*-a.height,d._render._imageToRender.width,d._render._imageToRender.height),a._render._context.restore())));a.filters&&a.filters.length>0?(this._applyFilters(a),a._render._imageToRender=a._render._canvas):a._render._imageToRender=a.children.length>0?a._render._canvas:a.texture}},_cacheImageData:function(a){a.texture&&(a.cachedImageData=this.getImageData(a.texture),a.imageData=this.cloneImageData(a.cachedImageData))},_createTextureCanvas:function(a){a._render=a._render||{},a._render._canvas=document.createElement("canvas"),a._render._context=a._render._canvas.getContext("2d"),a.texture?(a._render._canvas.width=a.texture.width,a._render._canvas.height=a.texture.height):(a._render._canvas.width=a.width||this.canvas.width/a.scale.x,a._render._canvas.height=a.height||this.canvas.height/a.scale.y)},_applyFilters:function(a){for(var b in a.filters)a.filters.hasOwnProperty(b)&&(a._render=a._render||{},a.filters[b].apply(a))},getImageData:function(a){var b=null,c=Math.min(a.width,this.canvas.width),d=Math.min(a.height,this.canvas.height);return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(a,0,0),b=this.context.getImageData(0,0,c,d),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),b},cloneImageData:function(a){for(var b=this.context.createImageData(a),c=b.data.length,d=0;c>d;d++)b.data[d]=a.data[d];return b}}),b.BaseTexture=b.Base.extend({init:function(){}}),b.BaseTexture.cache={},b.DisplayObjectContainer=b.Base.extend({init:function(){this.children=[],this.filters=[],this.imageData=null,this.position=new b.Point2D,this.scale=new b.Point2D(1,1),this.anchor=new b.Point2D(0,0),this.opacity=1,this.parent=null,this.width=0,this.height=0},addChild:function(a){this.addChildAt(a,this.children.length)},addChildAt:function(a,b){b>this.children.length&&(b=this.children.length),this.children.indexOf(a)<0&&(this.children.splice(b,0,a),a.parent=this,this._addChildToStage(a)),this.width=Math.max(this.width,a.width),this.height=Math.max(this.height,a.height),this._render&&this._render._chachedFilteredData&&(this._render._chachedFilteredData=null)},removeChild:function(a){this.children.indexOf(a)>-1&&(this.children.splice(this.children.indexOf(a),1),this._removeChildFromStage(a),a.parent=null,this._render&&this._render._chachedFilteredData&&(this._render._chachedFilteredData=null))},contains:function(a){return this.children.indexOf(a)>-1},_addChildToStage:function(a){if(a.stage!=this.stage){a.stage=this.stage;for(var b in a.children)a.children.hasOwnProperty(b)&&this._addChildToStage(a.children[b])}},_removeChildFromStage:function(a){a.stage=null;for(var b in a.children)a.children.hasOwnProperty(b)&&this._removeChildFromstage(a.children[b])},_updateImageData:function(){var a=0,b=null,c=null,d=null,b=null,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p="";if(this.stage){for(var q in this.children)if(this.children.hasOwnProperty(q)&&(b=b||this.cachedImageData?this.cachedImageData:this.stage.renderer.context.createImageData(this.stage.renderer.canvas.width,this.stage.renderer.canvas.height),d=this.children[q],c=d.imageData,l=Math.round(d.position.x),m=Math.round(d.position.y),d.opacity>0&&c)){e=b.data.length-1,d._updateImageData();for(var r=0;r<c.width;r++)for(var s=0;s<c.height;s++)a=4*(r*c.width+s),n=s+l,o=r+m,n>=0&&o>=0&&n<b.width&&o<b.height&&(renderPos=4*(o*b.width+n),f=c.data[a+0],g=c.data[a+1],h=c.data[a+2],j=c.data[a+3],i=j/255*d.opacity,i>0&&e>renderPos&&(k=b.data[renderPos+3]/255||1,b.data[renderPos+0]=f*i+(1-i)*b.data[renderPos+0]*k,b.data[renderPos+1]=g*i+(1-i)*b.data[renderPos+1]*k,b.data[renderPos+2]=h*i+(1-i)*b.data[renderPos+2]*k,b.data[renderPos+3]=Math.max(j*i,b.data[renderPos+3])))}this.applyFilters(),p&&p.length>0&&console.log(p),this.imageData=b||this.imageData}}}),b.Stage=b.DisplayObjectContainer.extend({init:function(){this._super(),this.stage=this}}),b.Sprite=b.DisplayObjectContainer.extend({init:function(a){function b(){c.texture=a,c.width=Math.max(c.width,c.texture.width),c.height=Math.max(c.height,c.texture.height),c.parent&&(c.parent.width=Math.max(c.width,c.parent.width),c.parent.height=Math.max(c.height,c.parent.height))}this._super();var c=this;this.cachedImageData=null,a.complete?b():a.addEventListener("load",b)}}),b.Sprite.fromImageUrl=function(a){var c=b.BaseTexture.cache[a]||new Image,d=null;return c.src||(c.src=a),d=new b.Sprite(c)},b.filters.TintFilter=b.Base.extend({init:function(){this._super();var a=null;a=1==arguments.length?arguments[0]:new b.Color(arguments[0],arguments[1],arguments[2],arguments[3]),this.color=a,this._prevColor=null},apply:function(a){var c=a._render._context.getImageData(0,0,a._render._canvas.width,a._render._canvas.height),d=a._render._context.createImageData(c),e=0,f=0,g=parseInt(this.color.r),h=parseInt(this.color.g),i=parseInt(this.color.b);if(!a._render._chachedFilteredData||!this._prevColor||this._prevColor.r!=this.color.r||this._prevColor.g!=this.color.g||this._prevColor.b!=this.color.b){for(var j=0;j<c.width;j++)for(var k=0;k<c.height;k++){var l=(c.data[f++],c.data[f++],c.data[f++],c.data[f++]);l>0?(d.data[e]=g*c.data[e]/255,e++,d.data[e]=h*c.data[e]/255,e++,d.data[e]=i*c.data[e]/255,e++,d.data[e]=c.data[e],e++):e+=4}this._prevColor?(this._prevColor.r=this.color.r,this._prevColor.g=this.color.g,this._prevColor.b=this.color.b,this._prevColor.a=this.color.a):this._prevColor=new b.Color(this.color.r,this.color.g,this.color.b,this.color.a),a._render._chachedFilteredData=d}a._render._context.putImageData(a._render._chachedFilteredData||c,0,0),a._render._chachedFilteredData=null}}),a.GoldenGraphics=b}(window);